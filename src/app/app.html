<div class="app-container">
    <app-camera-feed
            (gestureDetected)="onGestureDetected($event)">
    </app-camera-feed>

    @if (selectedGender === null) {
        <app-gender-selector
                [pointingGender]="pointingGender"
                [pointingProgress]="pointingProgress"
                (genderSelected)="onGenderSelected($event)">
        </app-gender-selector>
    }

    @if (selectedGender !== null) {
        <div class="main-content">
            <app-category-sidebar
                    [selectedCategory]="selectedCategory"
                    [selectedGender]="selectedGender"
                    [pointingCategory]="pointingCategory"
                    [pointingGenderButton]="pointingGenderButton"
                    [pointingProgress]="pointingProgress"
                    (categorySelected)="onCategorySelected($event)"
                    (changeGender)="onChangeGender()">
            </app-category-sidebar>

            <div class="center-area">
                <app-scene-viewer
                        [selectedGarments]="selectedGarments">
                </app-scene-viewer>
            </div>
        </div>

        <div class="bottom-bar">
            <app-gallery-bar
                #galleryBar
                [selectedCategory]="selectedCategory"
                [selectedGender]="selectedGender"
                (itemSelected)="onGarmentSelected($event)">
            </app-gallery-bar>
        </div>

        @if (peaceGestureActive) {
            <div class="peace-indicator"
                 [style.width.%]="peaceProgress">
            </div>
        }

        @if (showSavePopup) {
            <div class="save-popup">
                <div class="popup-content">
                    <span class="popup-icon">ðŸ“¸</span>
                    <span class="popup-text">Â¡Outfit guardado!</span>
                </div>
            </div>
        }
    }
</div>
